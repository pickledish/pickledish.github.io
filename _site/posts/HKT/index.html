<!DOCTYPE html>
<html>

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Higher Kinded Types Demystified — willett dot io</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,600">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

	<style>
		body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
}

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url("../../images/modules/styleguide/para.png") no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  border: 0 none;
  color: #cccccc;
  height: 2px;
  padding: 0; }

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }

ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

ul :last-child, ol :last-child {
  margin-bottom: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }
		body {
	font-family: "Source Sans Pro", Helvetica, Arial, sans-serif;
}

.section {
	padding-top: 0px;
}

.footer {
	padding-top: 0rem;
	background-color: white;
	padding-bottom: 1.5rem;
	line-height: 1.5;
	color: #999999;
}

/* Makes the footer stick to the bottom of the page */
.Site {
	display: flex;
	min-height: 100vh;
	flex-direction: column;
}
.Site-content {
	flex: 1;
}

/* Fixes footer spacing */
.Site-content > section {
	padding-bottom: 1.5rem;
}

/* Spacing for the list in post-list */
.ul_posts {
	list-style: none;
	padding-left: 0;
}

.li_posts {
	list-style: none;
	margin-bottom: 2rem;
}

.li_posts > h3 {
	margin-bottom: 0;
}

/* The rest! */

.light {
	font-weight: 300; }

body {
	font-size: 12pt; 
	color: #3a3a3a;  }

code, pre {
	font-family: "Roboto Mono", "Consolas", monospace;
	font-size: 10pt;
}

a {
	color: #ba8c2a;
}

li {
	list-style: initial;
}

h1 {
  font-weight: 600;
  font-size: 48px;
  margin: 0; }

h2 {
  font-weight: 600;
  font-size: 32px;
  border-bottom: 1px solid #cccccc; }

h3 {
  font-weight: 600;
  font-size: 24px; }

h4 {
  font-weight: 600;
  font-size: 18px; }

h5 {
  font-weight: 600;
  font-size: 14px; }

h6 {
  font-weight: 600;
  color: #777777;
  font-size: 14px; }


		.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */

	</style>

	<script>
		MathJax.Hub.Config({ tex2jax: {
			inlineMath: [['$','$'], ['\\(','\\)']],
			processEscapes: true
		} });
	</script>

</head>

<body class="Site">

	<main class="Site-content">

		<section class="hero is-white">

			<!-- Hero header: will be at the top of the hero -->
			<div class="hero-head">
				<nav class="navbar"><div class="container">

					<div class="navbar-brand">
						<span class="navbar-item"><span class="is-size-4">brandon willett</span></span>
						<span class="navbar-burger burger" onclick="document.querySelector('.navbar-menu').classList.toggle('is-active');">
							<span></span>
							<span></span>
							<span></span>
						</span>
					</div>

					<div id="navbarMenuHeroA" class="navbar-menu">
						<div class="navbar-end">
							<a href="/" class="navbar-item">Home</a>
							<a href="/about/" class="navbar-item">About</a>
							<a href="/contact/" class="navbar-item">Contact</a>
							<a href="https://github.com/pickledish" class="navbar-item">
								<span class="icon"><i class="fa fa-github fa-lg"></i></span>
							</a>
						</div>
					</div>

				</div></nav>
			</div>

			<!-- Hero content: will be in the middle -->
			<div class="hero-body">
				<div class="container has-text-centered">
					<h1 class="light">
						Higher Kinded Types Demystified
					</h1>
				</div>
			</div>

		</section>

		<section class="section">

			<div class="columns is-centered">
				<div class="column is-half">
					<p>The concept of higher-kinded types is coming up more often these days, both because functional languages (where they’re more relevant) are on the rise in terms of popularity, and because it’s currently the source of a few hotly-debated issues, like whether Rust will ever “get” them. The concept in itself isn’t a complicated one, despite the name being off-putting (higher <em>kinded</em>?), and understanding it is a great step in beginning to figure out some of the type-level programming that’s so popular in languages like Haskell and Scala. Abstraction city, here we come!</p>

<h2 id="first-functions">First, Functions</h2>

<p>It’s a bit easier to understand higher kinded types if we first talk about a very similar concept in a different universe, that might be more familiar: higher order functions. For those of us who are a few years out from an undergrad CS curriculum, a function is called “higher order” when it either takes in a function as a parameter or puts out a function as a return type. We can work our way up to higher order functions with a few examples:</p>

<ul>
  <li><strong>Order 0</strong> – <code class="highlighter-rouge">def seven(): Int = { return 7 }</code></li>
  <li><strong>Order 1</strong> – <code class="highlighter-rouge">def square(x: Int): Int = { return x * x }</code></li>
  <li><strong>Order 2</strong> – <code class="highlighter-rouge">def addSome(some: Int): Fun[Int -&gt; Int] = { ... }</code></li>
  <li><strong>Order 3</strong> – <code class="highlighter-rouge">def operateSome(op: Operator): Fun[Int -&gt; Fun[Int -&gt; Int]] = { ... }</code></li>
</ul>

<p>We’ll go through each of these one by one. It’s clear that as the “order” of the function goes up, the function-nesting of its parameter type (or its return type) goes up too: at order 0, there are no parameters, so we end up with constant functions. And then, at order 1 the parameters are “normal” types, like <code class="highlighter-rouge">Int</code>, but in a functional context they’re really constant functions themselves – after all, in <code class="highlighter-rouge">square</code>, we can view <code class="highlighter-rouge">x</code> as a function that yields the value of <code class="highlighter-rouge">x</code> every time it’s called.</p>

<p>Then, at order 2, things get more interesting, and the return type is actually a non-constant function itself, which is a function that adds the value <code class="highlighter-rouge">some</code> to an integer that’s passed into it. Thus, for example, we could write:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="n">addFour</span><span class="k">:</span> <span class="kt">Fun</span><span class="o">[</span><span class="kt">Int</span> <span class="kt">-&gt;</span> <span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="n">addSome</span><span class="o">(</span><span class="mi">4</span><span class="o">)</span>
<span class="k">val</span> <span class="n">result</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">addFour</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
<span class="n">print</span><span class="o">(</span><span class="n">result</span><span class="o">)</span>  <span class="c1">// prints "7", or so I hope
</span></code></pre></div></div>

<p>Now, it’s important to note that our <strong>Order 2</strong> function here (<code class="highlighter-rouge">addSome</code>) returns an <strong>Order 1</strong> function, one that operates only on the constant types we talked about before. We could talk about a function that returns a function that returns a function (a second order function), of course – and we do, with the example of an order 3 function above! But that bumps us up another order, and after that point it starts getting convoluted. The takeaway here is that an order <script type="math/tex">n</script> function will take in or return a function of order <script type="math/tex">n-1</script>, with our base case order 0 being a constant function.</p>

<h2 id="the-types-themselves">The Types Themselves</h2>

<p>So, it’s clear that the order of a function is based on how “nested” its parameter list is, and higher kinded types start to seem a bit less confusing when we realize the exact same thing is true for them.</p>

<h3 id="0th-order">0th Order</h3>

<p>Just like order-0 functions, these are our <strong>concrete</strong> types. They’re not parameterized on any other type, and are the most basic, everyday type we work with (and the first ones you’re introduced to when beginning a computer science curriculum). <code class="highlighter-rouge">String</code>, <code class="highlighter-rouge">Int</code>, and <code class="highlighter-rouge">Boolean</code> all fit into this category, along with any structs or classes you’ve defined yourself in most cases – so, <code class="highlighter-rouge">Professor</code> and <code class="highlighter-rouge">ServiceOrder</code> fit in here, too.</p>

<p>Overall, one can think of a 0th order type as one that is able to “stand on its own”, without any help, which contrasts with higher-order types.</p>

<h3 id="1st-order">1st Order</h3>

<p>A first-order type is one that is <em>parameterized</em> on a 0th order type, i.e. they take a type parameter just like how we saw a first-order function had a constant-function parameter (or return type). Thus, they’re not constant anymore because the type can change based on what type parameter it’s given, so they can’t be order-0 types anymore; we must have gone up an order.</p>

<p>Just like concrete types, these come up very often in conventional programming, with one of the most common examples being <code class="highlighter-rouge">List</code>. In most languages, <code class="highlighter-rouge">List</code> is homogeneous – each instance of <code class="highlighter-rouge">List</code> can hold one and only one type of object – and in fact <code class="highlighter-rouge">List</code> is parameterized on that type, which is why you’ll see <code class="highlighter-rouge">List&lt;Int&gt;</code> in Java or <code class="highlighter-rouge">[Int]</code> in Haskell. More examples of first-order types include <code class="highlighter-rouge">Map</code>, <code class="highlighter-rouge">Option</code>, and <code class="highlighter-rouge">Set</code>, and we can write our own first-order classes using polymorphic constructs. It might be useful to think of these as “container types”, since in most cases they exist to “hold” instances of another type.</p>

<p>So, we see that there are actually infinitely many ways to make a <code class="highlighter-rouge">List</code>, based on what’s passed in as its type parameter – just as there are infinitely many outputs of <code class="highlighter-rouge">square</code> based on what integer is passed in as a value parameter.</p>

<h3 id="2nd-order">2nd Order</h3>

<p>So, these are the “scary ones”, the ones you’ll hear referred to as higher-kinded types (HKTs) along with third-order types and above. Just like first-order types (container types) allow us to abstract over base types (write code that works easily no matter what type we store inside a <code class="highlighter-rouge">List</code>), second-order types allow us to <em>abstract over containers</em>. This is the key point to understand about HKTs, and also the point that makes for quite a hurdle – it’s a level of abstraction that we’re not used to thinking about. In effect, we’d like to be able to write code that will work on any kind of container type, whether it’s a <code class="highlighter-rouge">List</code>, an <code class="highlighter-rouge">Option</code>, a <code class="highlighter-rouge">Set</code>, or one of your own creation.</p>

<p>So say, for example, that during the course of a Tuesday morning we find the need to write a function <code class="highlighter-rouge">merge</code> that can take two <code class="highlighter-rouge">List</code>s and return a list that contains the elements that came from both. Then, we might write:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="n">merge</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">x</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">y</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>

<span class="o">}</span>
</code></pre></div></div>

<h2 id="further-reading">Further Reading</h2>

<ul>
  <li>The folks at Typelevel wrote a <a href="https://typelevel.org/blog/2016/08/21/hkts-moving-forward.html">similar article</a></li>
</ul>

				</div>
			</div>

		</section>

	</main>

	<footer class="footer">
		<div class="container">
			<div class="content has-text-centered">
				<hr>
				<div class="columns is-centered" style = "margin-right: 0">
					<div class="column is-half is-marginless is-paddingless">
						<br>
						<p class="is-marginless has-text-right">
							Made with <a href="https://bulma.io">Bulma</a> &nbsp; | &nbsp; Last updated 21 Jul 2018
						</p>
						<br>
					</div>
				</div>
			</div>
		</div>
	</footer>

	</body>

</html>